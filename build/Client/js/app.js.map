{"version":3,"names":[],"mappings":"","sources":["js/app.js"],"sourcesContent":["/**\r\n * Created by Nishanth on 8/30/2016.\r\n */\r\n\r\nangular.module('app', ['ui.router', 'ngAnimate']);\r\n\r\n\n/**\r\n * Created by Nishanth on 8/30/2016.\r\n */\r\n\r\nangular.module('app').config(config);\r\n\r\nconfig.$inject = [\r\n    '$httpProvider',\r\n    '$stateProvider',\r\n    '$urlRouterProvider'\r\n];\r\n\r\nfunction config($httpProvider, $stateProvider, $urlRouterProvider) {\r\n    console.log($httpProvider);\r\n\r\n    $urlRouterProvider.otherwise('/');\r\n\r\n    $stateProvider\r\n        .state('home', {\r\n            url: \"/home\",\r\n            templateUrl: '/Client/Partials/home.html',\r\n            controller: 'appController',\r\n            controllerAs:'appCtrl'\r\n        })\r\n\r\n        .state('profile', {\r\n            url: \"/profile\",\r\n            templateUrl: '/Client/Partials/profile.html',\r\n            controller: 'profileController',\r\n            controllerAs: 'profileCtrl'\r\n\r\n        })\r\n\r\n        .state('about', {\r\n            url: '/about',\r\n            templateUrl:'/Client/Partials/about.html'\r\n        })\r\n\r\n        .state('signup', {\r\n            url: '/signup',\r\n            templateUrl:'/Client/Partials/signupTemplate.html',\r\n            controller: 'appController',\r\n            controllerAs:'appCtrl'\r\n        })\r\n\r\n        .state('login', {\r\n            url: '/login',\r\n            templateUrl: '/Client/Partials/loginTemplate.html',\r\n            controller: 'appController',\r\n            controllerAs:'appCtrl'\r\n        })\r\n\r\n        .state('logout', {\r\n            url:'/logout',\r\n            controller: 'logoutController',\r\n            controllerAs: 'logoutCtrl'\r\n        })\r\n\r\n        $httpProvider.interceptors.push('authInterceptor');\r\n};\n/**\r\n * Created by Nishanth on 8/31/2016.\r\n */\r\n(function(){\r\nangular.module('app').controller('appController',appCtrlFunction);\r\n    function appCtrlFunction( $state, $http, $scope, authTokenFactory) {\r\n        console.log('in controller!');\r\n        var appCtrl = this;\r\n        appCtrl.signup = signup;\r\n        appCtrl.login = login;\r\n\r\n        function signup() {\r\n            var firstName = appCtrl.firstName;\r\n            var lastName = appCtrl.lastName;\r\n            var email = appCtrl.email;\r\n            var password = appCtrl.password;\r\n\r\n            var payload = {\r\n                firstName: firstName,\r\n                lastName: lastName,\r\n                email: email,\r\n                password: password\r\n            };\r\n\r\n            $http.post('/signup', payload).then(function (res) {\r\n                console.log(res);\r\n                authTokenFactory.setToken(res.data.token);\r\n                $state.go(res.data.dataRedirect);\r\n            });\r\n        }\r\n\r\n        function login() {\r\n            var email = appCtrl.email;\r\n            var password = appCtrl.password;\r\n\r\n            var payload = {\r\n                email: email,\r\n                password: password\r\n            };\r\n\r\n            $http.post('/login', payload).then(function (res) {\r\n                console.log(res.data);\r\n                if(res.data.token){\r\n                    authTokenFactory.setToken(res.data.token);\r\n                }\r\n                $state.go('profile');\r\n            });\r\n        }\r\n    }\r\n})();\n(function(){\r\n'use-strict';\r\n\r\nangular.module('app').controller('logoutController', logoutController);\r\n\r\nlogoutController.$inject = [\r\n\t'authTokenFactory',\r\n\t'$state'\r\n];\r\n\r\nfunction logoutController(authTokenFactory, $state){\r\n\tauthTokenFactory.removeToken();\r\n\t$state.go('home');\r\n}\r\n})();\n(function(){\r\n'use-strict';\r\n\r\nangular.module('app').controller('profileController', profileController);\r\nprofileController.$inject = [\r\n\t'$http'\r\n];\r\n\r\nfunction profileController($http){\r\n\tvar self = this;\r\n\r\n\t$http.get('http://localhost:3000/profile')\r\n\t.success(function(profile){\r\n\t\t$scope.profile = profile;\r\n\t})\r\n\t.error(function(err){\r\n\t\talert(err.message);\r\n\t})\r\n}\r\n\r\n})();\n(function(){\r\n'use-strict';\r\n\r\nangular.module('app').directive('appHeader', appHeader);\r\n\r\nfunction appHeader(){\r\n\tvar directive ={\r\n\t\trestrict : 'CAE',\r\n\t\tscope:{\r\n\t\t\teventHandler: '&ngClick'\r\n\t\t},\r\n\t\tbindToController: true,\r\n\t\tcontroller: headerController,\r\n\t\tcontrollerAs: 'headerCtrl',\r\n\t\ttemplateUrl: '/Client/Partials/header.html'\r\n\t};\r\n\r\n\tfunction link(scope, elem, attrs){}\r\n\treturn directive;\r\n}\r\n\r\nheaderController.$inject =['authTokenFactory']\r\n\r\nfunction headerController(authTokenFactory){\r\n\tvar self = this;\r\n\tself.isAuthenticated = authTokenFactory.isAuthenticated;\r\n\tconsole.log(self.isAuthenticated);\r\n}\r\n\r\n})();\n/**\r\n * Created by Nishanth on 8/30/2016.\r\n */\r\n\n/**\r\n * Created by Nishanth on 8/30/2016.\r\n */\r\nangular.module('app').run(['$state',function($state){\r\n    $state.go('home');\r\n    console.log(\"entered Run\");\r\n    //$rootScope.hello = \"akckldcmlsdkv\";\r\n    //$rootScope.printChange = function() {\r\n    //    console.log($rootScope.hello);\r\n    //}\r\n}]);\nangular.module('app').run(['$templateCache', function($templateCache) {$templateCache.put('/Client/Partials/about.html','<div class=container-fluid><h1>About page</h1></div>');\n$templateCache.put('/Client/Partials/header.html','<div><ul class=\"nav nav-tabs pull-right\"><li ui-sref-active=active><a ui-sref=home aria-expanded=false>Home</a>{{headerCtrl.isAuthenticated}}</li><li ng-show=headerCtrl.isAuthenticated() ui-sref-active=active><a ui-sref=profile aria-expanded=false>Profile</a></li><li ng-hide=headerCtrl.isAuthenticated() ui-sref-active=active><a ui-sref=signup aria-expanded=true>Sign Up</a></li><li ng-hide=headerCtrl.isAuthenticated() ui-sref-active=active><a ui-sref=login aria-expanded=true>log In</a></li><li ng-show=headerCtrl.isAuthenticated() ui-sref-active=active><a ui-sref=logout aria-expanded=false>Logout</a></li></ul></div>');\n$templateCache.put('/Client/Partials/home.html','<div class=\"jumbotron text-center\"><h1>Welcome Home {{hello}}!</h1><input type=text ng-model=hello ng-change=printChange()> <button class=\"btn btn-primary\" ui-sref=about>About</button> <button class=\"btn btn-success\" ui-sref=signup>Sign-up!</button> <button class=\"btn btn-success\" ui-sref=login>Log-in!</button></div>');\n$templateCache.put('/Client/Partials/loginTemplate.html','<div class=container><form class=form-signin><h2 class=form-signin-heading>Please Login IN</h2><label for=inputEmail class=sr-only>Email address</label> <input type=email id=inputEmail class=form-control placeholder=\"Email address\" ng-model=appCtrl.email required autofocus> <label for=inputPassword class=sr-only>Password</label> <input type=password id=inputPassword class=form-control ng-model=appCtrl.password placeholder=Password required><div class=checkbox><label><input type=checkbox value=remember-me> Remember me</label></div><button class=\"btn btn-lg btn-primary btn-block\" type=submit ng-click=appCtrl.login()>Login Me In!</button><br><a class=pull-right ui-sref=signUp>Create a new Account</a></form></div>');\n$templateCache.put('/Client/Partials/profile.html','<div class=\"jumbotron form-signin\"><h1>Profile</h1><label for=inputFirstName class=sr-only>First Name</label> <input type=text id=inputFirstName class=form-control placeholder=\"First Name\" ng-model=profileCtrl.firstName> <label for=inputLastName class=sr-only>Last Name</label> <input type=text id=inputLastName class=form-control placeholder=\"Last Name\" ng-model=profileCtrl.lastName> <label for=inputEmail class=sr-only>Email address</label> <input type=email id=inputEmail class=form-control placeholder=\"Email address\" ng-model=profileCtrl.email><ul ng-repeat=\"interest in profileCtrl.interests\">{{interest}}</ul></div>');\n$templateCache.put('/Client/Partials/signupTemplate.html','<div class=container><form class=form-signin><h2 class=\"form-signin-heading text-muted\">Sign Up!</h2><label for=inputFirstName class=sr-only>First Name</label> <input type=text id=inputFirstName class=form-control placeholder=\"First Name\" ng-model=appCtrl.firstName required autofocus> <label for=inputLastName class=sr-only>Last Name</label> <input type=text id=inputLastName class=form-control placeholder=\"Last Name\" ng-model=appCtrl.lastName autofocus> <label for=inputEmail class=sr-only>Email address</label> <input type=email id=inputEmail class=form-control placeholder=\"Email address\" ng-model=appCtrl.email required autofocus> <label for=inputPassword class=sr-only>Password</label> <input type=password id=inputPassword class=form-control placeholder=Password ng-model=appCtrl.password required> <input type=password id=confirmPassword class=form-control placeholder=\"Confirm Password\" required> <button class=\"btn btn-lg btn-primary btn-block\" type=submit ng-click=appCtrl.signup()>Sign Up</button></form></div>');}]);\n(function(){\r\n'use-strict';\r\n\r\nangular.module('app').factory('authInterceptor', authInterceptor)\r\n\r\nauthInterceptor.$inject = [\r\n\t'authTokenFactory'\r\n];\r\n\r\nfunction authInterceptor(authTokenFactory){\r\n\treturn{\r\n\t\trequest: request,\r\n\t\tresponse: response\r\n\t}\r\n\r\n\tfunction request(config){\r\n\t\tvar token = authTokenFactory.getToken();\r\n\r\n\t\tif(token)\r\n\t\t\tconfig.headers.Authorization = 'Bearer ' + token;\r\n\r\n\t\treturn config;\r\n\t}\r\n\r\n\tfunction response(res){\r\n\t\treturn res;\r\n\t}\r\n}\r\n})();\n(function(){\r\n\r\nangular.module('app').factory('authServiceFactory', authServiceFactory);\r\n\r\nauthServiceFactory.$inject = [\r\n\t'$q',\r\n\t'$http',\r\n\t'$rootScope'\r\n];\r\n\r\nfunction authServiceFactory($q, $http, $rootScope){\r\n\tvar service = {\r\n\t\tlogin : loginHandler,\r\n\t\tlogout : logoutHandler\r\n\t};\r\n\r\n\treturn service;\r\n\r\n\tfunction loginHandler(url, cred) {\r\n            return $http.post(url, cred).then(function (response) {\r\n                if (response.data.error) {\r\n                    return response.data;\r\n                }\r\n                else {\r\n                    \r\n                    return 'success';\r\n                }\r\n            });\r\n        }\r\n\r\n    function logoutHandler() {\r\n        \r\n    }\r\n}\r\n\r\n})();\n(function(){\r\n\r\nangular.module('app').factory('authTokenFactory', authTokenFactory);\r\n\r\nauthTokenFactory.$inject = [\r\n\t'$window'\r\n];\r\n\r\nfunction authTokenFactory($window){\r\n\tvar storage = $window.localStorage;\r\n    var cachedToken;\r\n    var authTokenFactory = {\r\n        setToken : setToken,\r\n        getToken : getToken,\r\n        isAuthenticated : isAuthenticated,\r\n        removeToken: removeToken\r\n    }\r\n\r\n    return authTokenFactory;\r\n\r\n    function setToken(token){\r\n        console.log('setting token' + token);\r\n        cachedToken = token;\r\n        $window.localStorage.setItem('userToken',token);\r\n    }\r\n\r\n    function getToken(){\r\n        if(!cachedToken)\r\n            cachedToken = localStorage.getItem('userToken');\r\n\r\n        return cachedToken;\r\n    }\r\n\r\n    function isAuthenticated(){\r\n        return !!authTokenFactory.getToken();\r\n    }\r\n\r\n    function removeToken(){\r\n        cachedToken = null;\r\n        localStorage.removeItem('userToken');\r\n    }\r\n}\r\n\r\n})();\n/**\r\n * Created by Nishanth on 9/11/2016.\r\n */\r\n(function(){\r\n'use strict';\r\n\r\n\r\nangular.module('app').factory('httpFactory', httpFactory);\r\n\r\nhttpFactory.$inject= [\r\n\t'$http',\r\n\t'$q'\r\n];\r\n\r\nfunction httpFactory($http, $q){\r\n\tvar service = {\r\n\t\tget : getHandler,\r\n\t\tpost : postHandler\r\n\t};\r\n\r\n\treturn service;\r\n\r\n\tfunction postHandler(url, payload) {\r\n            return $http.post(url, payload).then(function (response) {\r\n                if (response.data.error) {\r\n                    return response.data;\r\n                }\r\n                else {\r\n                    \r\n                    return response.data;\r\n                }\r\n            });\r\n        }\r\n\r\n    function getHandler(url) {\r\n        return $http.get(url).then(function(response){ //can try .then().catch(errfn())\r\n        \tif (response.data.error) {\r\n                return response.data;\r\n            }\r\n            else {\r\n                return response.data;\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n})();"],"file":"js/app.js","sourceRoot":"/source/"}