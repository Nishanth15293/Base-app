{"version":3,"names":[],"mappings":"","sources":["js/app.js"],"sourcesContent":["/**\r\n * Created by Nishanth on 8/30/2016.\r\n */\r\n\r\nangular.module('app', ['ui.router', 'ngAnimate', 'satellizer']);\r\n\r\n\n/**\r\n * Created by Nishanth on 8/30/2016.\r\n */\r\n\r\nangular.module('app').config(config);\r\n\r\nconfig.$inject = [\r\n    '$httpProvider',\r\n    '$stateProvider',\r\n    '$urlRouterProvider',\r\n    '$authProvider'\r\n];\r\n\r\nfunction config($httpProvider, $stateProvider, $urlRouterProvider, $authProvider) {\r\n\r\n    $urlRouterProvider.otherwise('/');\r\n\r\n    $stateProvider\r\n        .state('home', {\r\n            url: \"/home\",\r\n            templateUrl: '/Client/Partials/home.html',\r\n        })\r\n\r\n        .state('profile', {\r\n            url: \"/profile\",\r\n            templateUrl: '/Client/Partials/profile.html',\r\n            controller: 'profileController',\r\n            controllerAs: 'profileCtrl'\r\n\r\n        })\r\n\r\n        .state('about', {\r\n            url: '/about',\r\n            templateUrl:'/Client/Partials/about.html'\r\n        })\r\n\r\n        .state('signup', {\r\n            url: '/signup',\r\n            templateUrl:'/Client/Partials/signupTemplate.html',\r\n            controller: 'signupController',\r\n            controllerAs:'signupCtrl'\r\n        })\r\n\r\n        .state('login', {\r\n            url: '/login',\r\n            templateUrl: '/Client/Partials/loginTemplate.html',\r\n            controller: 'loginController',\r\n            controllerAs:'loginCtrl'\r\n        })\r\n\r\n        .state('logout', {\r\n            url:'/logout',\r\n            controller: 'logoutController',\r\n            controllerAs: 'logoutCtrl'\r\n        })\r\n\r\n        .state('dashboard', {\r\n            url:'/dashboard',\r\n            templateUrl: '/Client/Partials/dashboard.html',\r\n            controller: 'dashboardController',\r\n            controllerAs: 'dashboardCtrl'\r\n        })\r\n        $authProvider.loginUrl = '/login'\r\n        $authProvider.signupUrl = '/signup'\r\n        $authProvider.google({\r\n            clientId: '299585083072-vt5ot91ldob4fnnjpfjnke4vgrisd3bp.apps.googleusercontent.com'\r\n        })\r\n        $authProvider.facebook({\r\n            clientId: '828161080654703'\r\n        })\r\n\r\n        $httpProvider.interceptors.push('authInterceptor');\r\n};\n/**\r\n * Created by Nishanth on 8/31/2016.\r\n */\r\n(function(){\r\nangular.module('app').controller('signupController',signupController);\r\n\r\nsignupController.$inject = [\r\n    '$state',\r\n    '$http',\r\n    '$scope',\r\n    '$auth'\r\n];\r\n    function signupController( $state, $http, $scope, $auth) {\r\n        var signupCtrl = this;\r\n        signupCtrl.signup = signup;\r\n\r\n        function signup() {\r\n            var firstName = signupCtrl.firstName;\r\n            var lastName = signupCtrl.lastName;\r\n            var email = signupCtrl.email;\r\n            var password = signupCtrl.password;\r\n\r\n            var payload = {\r\n                firstName: firstName,\r\n                lastName: lastName,\r\n                email: email,\r\n                password: password\r\n            };\r\n\r\n            // $http.post('/signup', payload).then(function (res) {\r\n            //     authTokenFactory.setToken(res.data.token);\r\n            //     $state.go(res.data.dataRedirect);\r\n            // });\r\n            $auth.signup(payload)\r\n                .then(function(res){\r\n                    console.log('Thanks for signing up ' + res.data.user.email + '!');\r\n                    $auth.setToken(res.data.token);\r\n                    $state.go('dashboard');\r\n                })\r\n                .catch(function(res){\r\n                    console.log('Something went wrong, Please try again!');\r\n                })\r\n\r\n        }\r\n    }\r\n})();\n(function(){\r\n'use-strict';\r\nangular.module('app').controller('dashboardController', dashboardController);\r\n\r\ndashboardController.$inject = ['$scope'];\r\n\r\nfunction dashboardController($scope){\r\n var self = this;\r\n this.message = 'Welcome to You Dashboard';\r\n}\r\n\r\n})();\n(function(){\r\n\r\nangular.module('app').controller('loginController', loginController);\r\nloginController.$inject = [\r\n\t'$state',\r\n\t'$http',\r\n\t'$auth',\r\n];\r\n\r\nfunction loginController($state, $http, $auth){\r\n    var loginCtrl = this;\r\n\tloginCtrl.login = login;\r\n\tloginCtrl.authenticate = authenticate;\r\n\r\n\tfunction login() {\r\n        var email = loginCtrl.email;\r\n        var password = loginCtrl.password;\r\n\r\n        var payload = {\r\n            email: email,\r\n            password: password\r\n        };\r\n\r\n        $auth.login(payload)\r\n        \t\t.then(function(res){\r\n        \t\t\tconsole.log('Thanks for coming back ' + res.data.user.email + '!');\r\n    \t\t\t\t$state.go('dashboard');\r\n\r\n        \t\t})\r\n        \t\t.catch(function(res){\r\n        \t\t\tconsole.log('Something went wrong, Please try again!');\r\n        \t\t})\r\n    }\t\r\n\r\n    function authenticate(provider) {\r\n    \t$auth.authenticate(provider).then(function(res){\r\n    \t\tconsole.log('Thanks for signing in' + res.data.user.displayName + '!');\r\n    \t\t$state.go('dashboard');\r\n    \t}, function(err){\r\n    \t\tconsole.log('Something went wrong, Please try again!');\r\n    \t});\r\n    }\r\n}\r\n})();\n(function(){\r\n'use-strict';\r\n\r\nangular.module('app').controller('logoutController', logoutController);\r\n\r\nlogoutController.$inject = [\r\n\t'$auth',\r\n\t'$state'\r\n];\r\n\r\nfunction logoutController($auth, $state){\r\n\t$auth.logout();\r\n\t$state.go('login');\r\n}\r\n})();\n(function(){\r\n'use-strict';\r\n\r\nangular.module('app').controller('profileController', profileController);\r\nprofileController.$inject = [\r\n\t'$http'\r\n];\r\n\r\nfunction profileController($http){\r\n\tvar self = this;\r\n\r\n\t$http.get('http://localhost:3000/profile')\r\n\t.success(function(profile){\r\n\t\t$scope.profile = profile;\r\n\t})\r\n\t.error(function(err){\r\n\t\talert(err.message);\r\n\t})\r\n}\r\n\r\n})();\n(function(){\r\n'use-strict';\r\n\r\nangular.module('app').directive('appHeader', appHeader);\r\n\r\nfunction appHeader(){\r\n\tvar directive ={\r\n\t\trestrict : 'CAE',\r\n\t\tscope:{\r\n\t\t\teventHandler: '&ngClick'\r\n\t\t},\r\n\t\tbindToController: true,\r\n\t\tcontroller: headerController,\r\n\t\tcontrollerAs: 'headerCtrl',\r\n\t\ttemplateUrl: '/Client/Partials/header.html'\r\n\t};\r\n\r\n\tfunction link(scope, elem, attrs){}\r\n\treturn directive;\r\n}\r\n\r\nheaderController.$inject =['$auth']\r\n\r\nfunction headerController($auth){\r\n\tvar self = this;\r\n\tself.isAuthenticated = $auth.isAuthenticated;\r\n}\r\n\r\n})();\n/**\r\n * Created by Nishanth on 8/30/2016.\r\n */\r\n       \n/**\r\n * Created by Nishanth on 8/30/2016.\r\n */\r\nangular.module('app').run(['$state', '$window' ,function($state, $window){\r\n    $state.go('home');\r\n    console.log(\"entered Run\");\r\n    var params  = $window.location.search.substring(1);\r\n    console.log(params);\r\n\r\n    if(params && $window.opener && $window.opener.location.origin === $window.location.origin){\r\n    \tvar pair = params.split('=');\r\n    \tvar code = decodeURIComponent(pair[1]);\r\n\r\n    \t$window.opener.postMessage(code, window.location.origin);\r\n    }\r\n}]);\nangular.module('app').run(['$templateCache', function($templateCache) {$templateCache.put('/Client/Partials/about.html','<div class=container-fluid><h1>About page</h1></div>');\n$templateCache.put('/Client/Partials/dashboard.html','<div class=jumbotron><h1>{{dashboardCtrl.message}}</h1></div>');\n$templateCache.put('/Client/Partials/header.html','<div><ul class=\"nav nav-tabs pull-right\"><li ui-sref-active=active><a ui-sref=home aria-expanded=false>Home</a>{{headerCtrl.isAuthenticated}}</li><li ng-show=headerCtrl.isAuthenticated() ui-sref-active=active><a ui-sref=profile aria-expanded=false>Profile</a></li><li ng-hide=headerCtrl.isAuthenticated() ui-sref-active=active><a ui-sref=login aria-expanded=true>log In</a></li><li ng-show=headerCtrl.isAuthenticated() ui-sref-active=active><a ui-sref=dashboard aria-expanded=false>Dashboard</a></li><li ng-show=headerCtrl.isAuthenticated() ui-sref-active=active><a ui-sref=logout aria-expanded=false>Logout</a></li></ul></div>');\n$templateCache.put('/Client/Partials/home.html','<div class=\"jumbotron text-center\"><h1>Welcome Home {{hello}}!</h1><input type=text ng-model=hello ng-change=printChange()> <button class=\"btn btn-primary\" ui-sref=about>About</button> <button class=\"btn btn-success\" ui-sref=signup>Sign-up!</button> <button class=\"btn btn-success\" ui-sref=login>Log-in!</button></div>');\n$templateCache.put('/Client/Partials/loginTemplate.html','<div class=container><form class=form-signin><h2 class=form-signin-heading>Please Login IN</h2><label for=inputEmail class=sr-only>Email address</label> <input type=email id=inputEmail class=form-control placeholder=\"Email address\" ng-model=loginCtrl.email required autofocus> <label for=inputPassword class=sr-only>Password</label> <input type=password id=inputPassword class=form-control ng-model=loginCtrl.password placeholder=Password required><div class=checkbox><label><input type=checkbox value=remember-me> Remember me</label></div><button class=\"btn btn-lg btn-primary btn-block\" type=submit ng-click=loginCtrl.login()>Login Me In!</button><br><p class=\"text-muted pull-right\">Not registered yet?<br><a class=pull-right ui-sref=signup>Create a new Account</a></p></form><div class=row style=\"margin-top: 50px;\"><div class=col-md-4><button class=\"btn btn-lg btn-danger btn-block\" ng-click=\"loginCtrl.authenticate(\\'google\\')\" type=button><i class=\"fa fa-google-plus\" aria-hidden=true></i> Sign in with Google</button></div><div class=col-md-4><button class=\"btn btn-lg btn-primary btn-block\" ng-click=\"loginCtrl.authenticate(\\'facebook\\')\" type=button><i class=\"fa fa-facebook-square\" aria-hidden=true></i> Sign in with facebook</button></div><div class=col-md-4><button class=\"btn btn-lg btn-default btn-block\" ng-click=TwitterLogin() type=button><i class=\"fa fa-github\" aria-hidden=true></i> Sign in with twitter</button></div></div></div>');\n$templateCache.put('/Client/Partials/profile.html','<div class=\"jumbotron form-signin\"><h1>Profile</h1><label for=inputFirstName class=sr-only>First Name</label> <input type=text id=inputFirstName class=form-control placeholder=\"First Name\" ng-model=profileCtrl.firstName> <label for=inputLastName class=sr-only>Last Name</label> <input type=text id=inputLastName class=form-control placeholder=\"Last Name\" ng-model=profileCtrl.lastName> <label for=inputEmail class=sr-only>Email address</label> <input type=email id=inputEmail class=form-control placeholder=\"Email address\" ng-model=profileCtrl.email><ul ng-repeat=\"interest in profileCtrl.interests\">{{interest}}</ul></div>');\n$templateCache.put('/Client/Partials/signupTemplate.html','<div class=container><form class=form-signin><h2 class=\"form-signin-heading text-muted\">Sign Up!</h2><label for=inputFirstName class=sr-only>First Name</label> <input type=text id=inputFirstName class=form-control placeholder=\"First Name\" ng-model=signupCtrl.firstName required autofocus> <label for=inputLastName class=sr-only>Last Name</label> <input type=text id=inputLastName class=form-control placeholder=\"Last Name\" ng-model=signupCtrl.lastName autofocus> <label for=inputEmail class=sr-only>Email address</label> <input type=email id=inputEmail class=form-control placeholder=\"Email address\" ng-model=signupCtrl.email required autofocus> <label for=inputPassword class=sr-only>Password</label> <input type=password id=inputPassword class=form-control placeholder=Password ng-model=signupCtrl.password required> <input type=password id=confirmPassword class=form-control placeholder=\"Confirm Password\" required> <button class=\"btn btn-lg btn-primary btn-block\" type=submit ng-click=signupCtrl.signup()>Sign Up</button><br><p class=pull-right>Already Registered? Login <a ui-sref=login>here</a></p></form></div>');}]);\n(function(){\r\n'use-strict';\r\n\r\nangular.module('app').factory('authInterceptor', authInterceptor)\r\n\r\nauthInterceptor.$inject = [\r\n\t'authTokenFactory'\r\n];\r\n\r\nfunction authInterceptor(authTokenFactory){\r\n\treturn{\r\n\t\trequest: request,\r\n\t\tresponse: response\r\n\t}\r\n\r\n\tfunction request(config){\r\n\t\tvar token = authTokenFactory.getToken();\r\n\r\n\t\tif(token)\r\n\t\t\tconfig.headers.Authorization = 'Bearer ' + token;\r\n\r\n\t\treturn config;\r\n\t}\r\n\r\n\tfunction response(res){\r\n\t\treturn res;\r\n\t}\r\n}\r\n})();\n(function(){\r\n\r\nangular.module('app').factory('authServiceFactory', authServiceFactory);\r\n\r\nauthServiceFactory.$inject = [\r\n\t'$http',\r\n    '$state',\r\n    '$window',\r\n    '$q',\r\n    'authTokenFactory'\r\n];\r\n\r\nfunction authServiceFactory($http, $state, $window, $q, authTokenFactory){\r\n\t// var service = {\r\n\t// \tlogin : loginHandler,\r\n\t// \tsignup : signupHandler\r\n\t// };\r\n\r\n\t// return service;\r\n\r\n //    function authSuccessful(res){\r\n //        authTokenFactory.setToken(res.token);\r\n //        $state.go('dashboard');\r\n //    }\r\n\r\n //    function loginHandler(url, cred) {\r\n //            return $http.post(url, cred).success(authSuccessful);\r\n //        }\r\n\r\n //    function signupHandler(url,cred) {\r\n //        return $http.post(url,cred).success(authSuccessful);\r\n //    }\r\n\r\n}\r\n\r\n})();\n(function(){\r\n\r\nangular.module('app').factory('authTokenFactory', authTokenFactory);\r\n\r\nauthTokenFactory.$inject = [\r\n\t'$window'\r\n];\r\n\r\nfunction authTokenFactory($window){\r\n\tvar storage = $window.localStorage;\r\n    var cachedToken;\r\n    var authTokenFactory = {\r\n        setToken : setToken,\r\n        getToken : getToken,\r\n        isAuthenticated : isAuthenticated,\r\n        removeToken: removeToken\r\n    }\r\n\r\n    return authTokenFactory;\r\n\r\n    function setToken(token){\r\n        console.log('setting token' + token);\r\n        cachedToken = token;\r\n        $window.localStorage.setItem('userToken',token);\r\n    }\r\n\r\n    function getToken(){\r\n        if(!cachedToken)\r\n            cachedToken = localStorage.getItem('userToken');\r\n\r\n        return cachedToken;\r\n    }\r\n\r\n    function isAuthenticated(){\r\n        return !!authTokenFactory.getToken();\r\n    }\r\n\r\n    function removeToken(){\r\n        cachedToken = null;\r\n        localStorage.removeItem('userToken');\r\n    }\r\n}\r\n\r\n})();\n/**\r\n * Created by Nishanth on 9/11/2016.\r\n */\r\n(function(){\r\n'use strict';\r\n\r\n\r\nangular.module('app').factory('httpFactory', httpFactory);\r\n\r\nhttpFactory.$inject= [\r\n\t'$http',\r\n\t'$q'\r\n];\r\n\r\nfunction httpFactory($http, $q){\r\n\tvar service = {\r\n\t\tget : getHandler,\r\n\t\tpost : postHandler\r\n\t};\r\n\r\n\treturn service;\r\n\r\n\tfunction postHandler(url, payload) {\r\n            return $http.post(url, payload).then(function (response) {\r\n                if (response.data.error) {\r\n                    return response.data;\r\n                }\r\n                else {\r\n                    \r\n                    return response.data;\r\n                }\r\n            });\r\n        }\r\n\r\n    function getHandler(url) {\r\n        return $http.get(url).then(function(response){ //can try .then().catch(errfn())\r\n        \tif (response.data.error) {\r\n                return response.data;\r\n            }\r\n            else {\r\n                return response.data;\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n})();"],"file":"js/app.js","sourceRoot":"/source/"}